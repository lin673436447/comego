# 微信小程序编译指南

## 问题说明

在微信开发者工具中打开uniapp项目时提示"未找到app.json"，这是因为uniapp项目需要先编译才能生成微信小程序所需的配置文件。

## 解决方案

### 方法一：使用HBuilderX（推荐）

1. 下载并安装 [HBuilderX](https://www.dcloud.io/hbuilderx.html)
2. 打开HBuilderX，选择 `文件` -> `打开目录`
3. 选择 `e:\github\come-go\uniapp` 目录
4. 点击 `运行` -> `运行到小程序模拟器` -> `微信开发者工具`
5. 首次运行会自动编译并生成dist目录
6. 在微信开发者工具中打开 `e:\github\come-go\uniapp\dist\dev\mp-weixin` 目录

### 方法二：使用命令行编译

#### 1. 安装依赖

```bash
cd e:\github\come-go\uniapp
npm install
```

#### 2. 编译项目

```bash
# 开发模式编译
npm run dev:mp-weixin

# 生产模式编译
npm run build:mp-weixin
```

#### 3. 在微信开发者工具中打开

编译完成后，在微信开发者工具中导入项目：
- 项目路径：`e:\github\come-go\uniapp\dist\dev\mp-weixin`
- AppID：使用测试号或填入自己的AppID

## 注意事项

### 1. TabBar图标问题

当前tabbar图标是占位文件，需要替换为实际的图标文件。

**图标要求：**
- 格式：PNG
- 尺寸：81px * 81px（推荐）
- 颜色：未选中使用灰色（#6B7280），选中使用蓝色（#1E40AF）
- 背景：透明

**图标位置：** `e:\github\come-go\uniapp\static\tabbar\`

**需要的图标文件：**
- home.png / home-active.png（首页）
- record.png / record-active.png（记账）
- bill.png / bill-active.png（账单）
- stats.png / stats-active.png（统计）
- profile.png / profile-active.png（我的）

### 2. 默认头像

需要在 `e:\github\come-go\uniapp\static\` 目录下放置 `default-avatar.png` 文件。

### 3. API地址配置

修改 `e:\github\come-go\uniapp\utils\request.js` 中的BASE_URL：

```javascript
const BASE_URL = 'http://localhost:8080/api/v1' // 修改为实际后端地址
```

### 4. 微信开发者工具配置

在微信开发者工具中：
1. 点击右上角 `详情`
2. 在 `本地设置` 中勾选：
   - ✅ 不校验合法域名、web-view（业务域名）、TLS版本以及HTTPS证书
   - ✅ 启用调试

## 常见问题

### Q1: 编译时报错 "Cannot find module"

**A:** 确保已安装依赖：`npm install`

### Q2: 编译成功但微信开发者工具报错

**A:** 检查微信开发者工具的基础库版本，建议使用最新稳定版

### Q3: TabBar不显示

**A:** 确保tabbar图标文件存在且格式正确（PNG格式，81px*81px）

### Q4: 页面空白

**A:** 检查控制台是否有错误，可能是API请求失败导致的

## 快速开始

如果您想快速查看效果，建议使用HBuilderX：

1. 安装HBuilderX
2. 打开uniapp项目目录
3. 点击运行到微信开发者工具
4. 自动编译并打开

## 项目结构说明

编译后的微信小程序代码在 `dist/dev/mp-weixin` 目录中，包含：
- app.json（小程序配置）
- app.js（小程序逻辑）
- app.wxss（小程序样式）
- pages/（页面文件）
- static/（静态资源）

## 下一步

1. 准备TabBar图标文件并替换占位文件
2. 准备默认头像文件
3. 修改API地址为实际后端地址
4. 启动后端服务
5. 编译并运行小程序

## 技术支持

如遇到问题，请参考：
- [uniapp官方文档](https://uniapp.dcloud.net.cn/)
- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)